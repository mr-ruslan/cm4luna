# Алгоритм планироввния на вычислительных моделях с массивами

## Инструкция:

### Определение вычислительной модели

Создать объект класса Model. В конструктор передать словарь переменных модели (параметр v: dict) и операций модели (параметр o : dict).

Ключи словарей - имена переменных или операций в виде строк.

Значения в словаре v - объекты классов SVariable или MVariable для обычных и массовых переменных соотв.

Значения в словаре o - объекты классов SOpertaion или MOperation для обычных и массовых операций соотв.

Пример:

```SOperation('initX', ['n'] , [('x',(0,1))])``` - простая операция *initX*, вычисляющая *x[1]* по *n*; 

```MOperation('g', [('x',(1,0))], [('x',(1,1))], VariablesSet([('g',(4,5))]))``` - массовая операция *g*, вычисляющая *x[1\*i+1]* по *x[1\*i+0]* для *i=1,2,3...*;

```MOperation('f', [('x',(1,0))], [('y',(2,3))], VariablesSet([('f',(4,5))]))``` - массовая операция *f*, вычисляющая *y[2\*i+3]* по *x[1\*i+0]* для *i=5,9,13...*.

Для таких операций необходимо указать следующие переменные:

```SVariable('n', ['initX'], [])``` - *n* используется в *initX*;

```MVariable('x', ['g'], ['initX','g'])``` - *x* используется в *initX* и *g*, а вычисляется в *g*;

```MVariable('y', [], ['f'])``` - *y* не используется, а вычисляется в *f*.

Ключи в словарях и названия в соответствующих объектах должны совпадать, поэтому лучше создать простые списки переменных и операций, а модель описать так:

```myModel = Model(v={x.label : x for x in modelVariables}, o={x.label : x for x in modelOperations})```
 
### Планирование на модели

```plannedMyModel = planCalc(myModel, VariablesSet(['n']), VariablesSet([('x',(0,100)),('y',(0,29))]))```

Здесь на объявленной myModel (с описанными ранее переменными и операциями) запрашивается планирование вычисления *W = { x[100]; y[29]}* по *V={n}*.

Результат планирования - новая модель с сгенерированными пси-операциями - в данном случае сохранится в переменной plannedMyModel.

### Генерация программы

```model2luna(myModel, plannedMyModel, VariablesSet(['n']), VariablesSet([('x',(0,100)),('y',(0,29))]))```

Для получения строки с программой на языке LuNA нужно передать в model2luna исходную и спланированную модели, а также V и W, переданные ранее в функцию planCalc.

### Комментраий
```VariablesSet([последовательность 1, последовательность 2, ..., последовательность n])``` - это множество именованных последовательностей *[a\*i+b]*.

Над такими множествами определены стандартные множественные операции: объединение, пересечение, разность.